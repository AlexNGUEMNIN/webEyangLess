"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3225],{3225:(y,g,a)=>{a.r(g),a.d(g,{ProfilePage:()=>E});var p=a(467),m=a(177),u=a(4341),l=a(6087),P=a(5079),s=a(5873),d=a(3114),e=a(4438),h=a(6766);function b(r,c){if(1&r&&e.nrm(0,"img",25),2&r){const n=e.XpG();e.Y8G("src",n.userProfile.photo,e.B4B)}}function x(r,c){1&r&&e.nrm(0,"ion-icon",26)}function M(r,c){if(1&r&&(e.j41(0,"div",27)(1,"div",28)(2,"span",29),e.EFF(3,"Nom"),e.k0s(),e.j41(4,"span",30),e.EFF(5),e.k0s()(),e.j41(6,"div",28)(7,"span",29),e.EFF(8,"Pr\xe9nom"),e.k0s(),e.j41(9,"span",30),e.EFF(10),e.k0s()(),e.j41(11,"div",28)(12,"span",29),e.EFF(13,"Adresse email"),e.k0s(),e.j41(14,"span",30),e.EFF(15),e.k0s()(),e.j41(16,"div",28)(17,"span",29),e.EFF(18,"Type d'utilisateur"),e.k0s(),e.j41(19,"span",30),e.EFF(20),e.k0s()(),e.j41(21,"div",28)(22,"span",29),e.EFF(23,"Mot de passe"),e.k0s(),e.j41(24,"span",31),e.EFF(25,"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"),e.k0s()(),e.j41(26,"div",28)(27,"span",29),e.EFF(28,"Num\xe9ro de t\xe9l\xe9phone"),e.k0s(),e.j41(29,"span",30),e.EFF(30),e.k0s()()()),2&r){const n=e.XpG();e.R7$(5),e.JRh(n.userProfile.nom),e.R7$(5),e.JRh(n.userProfile.prenom),e.R7$(5),e.JRh(n.userProfile.email),e.R7$(5),e.JRh(n.userProfile.type),e.R7$(10),e.JRh(n.userProfile.telephone)}}function v(r,c){if(1&r){const n=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"ion-label",34),e.EFF(3,"Nom"),e.k0s(),e.j41(4,"ion-item",35)(5,"ion-input",36),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.editProfile.nom,o)||(i.editProfile.nom=o),e.Njj(o)}),e.k0s()()(),e.j41(6,"div",33)(7,"ion-label",34),e.EFF(8,"Pr\xe9nom"),e.k0s(),e.j41(9,"ion-item",35)(10,"ion-input",37),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.editProfile.prenom,o)||(i.editProfile.prenom=o),e.Njj(o)}),e.k0s()()(),e.j41(11,"div",33)(12,"ion-label",34),e.EFF(13,"Adresse email"),e.k0s(),e.j41(14,"ion-item",35)(15,"ion-input",38),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.editProfile.email,o)||(i.editProfile.email=o),e.Njj(o)}),e.k0s()()(),e.j41(16,"div",33)(17,"ion-label",34),e.EFF(18,"Nouveau mot de passe"),e.k0s(),e.j41(19,"ion-item",35)(20,"ion-input",39),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.editProfile.motDePasse,o)||(i.editProfile.motDePasse=o),e.Njj(o)}),e.k0s()()(),e.j41(21,"div",33)(22,"ion-label",34),e.EFF(23,"Num\xe9ro de t\xe9l\xe9phone"),e.k0s(),e.j41(24,"ion-item",35)(25,"ion-input",40),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.editProfile.telephone,o)||(i.editProfile.telephone=o),e.Njj(o)}),e.k0s()()(),e.j41(26,"div",41)(27,"ion-button",42),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.cancelEdit())}),e.nrm(28,"ion-icon",43),e.EFF(29," Annuler "),e.k0s(),e.j41(30,"ion-button",44),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.saveProfile())}),e.nrm(31,"ion-icon",45),e.EFF(32," Sauvegarder "),e.k0s()()()}if(2&r){const n=e.XpG();e.R7$(5),e.R50("ngModel",n.editProfile.nom),e.R7$(5),e.R50("ngModel",n.editProfile.prenom),e.R7$(5),e.R50("ngModel",n.editProfile.email),e.R7$(5),e.R50("ngModel",n.editProfile.motDePasse),e.R7$(5),e.R50("ngModel",n.editProfile.telephone)}}function C(r,c){if(1&r){const n=e.RV6();e.j41(0,"div",46)(1,"ion-button",47),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.startEdit())}),e.nrm(2,"ion-icon",48),e.EFF(3," Modifier les informations personnelles "),e.k0s()()}}function O(r,c){if(1&r){const n=e.RV6();e.j41(0,"div",49)(1,"div",50)(2,"h2"),e.EFF(3,"Changer photo profil"),e.k0s(),e.j41(4,"ion-button",51),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.closePhotoModal())}),e.nrm(5,"ion-icon",52),e.k0s()(),e.j41(6,"div",53)(7,"ion-button",54),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.takePhoto())}),e.nrm(8,"ion-icon",55),e.EFF(9," Prendre une photo "),e.k0s(),e.j41(10,"ion-button",54),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.selectFromGallery())}),e.nrm(11,"ion-icon",56),e.EFF(12," Choisir dans la galerie "),e.k0s()()()}}let E=(()=>{var r;class c{constructor(t,o,i,f,_){this.router=t,this.actionSheetController=o,this.alertController=i,this.toastController=f,this.loadingController=_,this.userProfile={nom:"WOUAMBA",prenom:"Roy Melvin",email:"wouambar@gmail.com",type:"\xc9tudiant",motDePasse:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",telephone:"+237 6 73 58 99 00",photo:void 0},this.editProfile={...this.userProfile},this.isEditing=!1,this.showPhotoModal=!1,(0,P.a)({menuOutline:s.Kuj,personCircleOutline:s.kki,cameraOutline:s.GOB,imagesOutline:s.dFz,createOutline:s.hmR,homeOutline:s.Ud0,businessOutline:s.FL4,mapOutline:s.dG8,personOutline:s.wAZ,checkmarkOutline:s.g1L,closeOutline:s.xfX})}ngOnInit(){this.loadUserProfile()}loadUserProfile(){const t=localStorage.getItem("userProfile");t&&(this.userProfile=JSON.parse(t))}startEdit(){this.isEditing=!0,this.editProfile={...this.userProfile}}cancelEdit(){this.isEditing=!1,this.editProfile={...this.userProfile}}saveProfile(){var t=this;return(0,p.A)(function*(){if(!t.editProfile.nom.trim()||!t.editProfile.prenom.trim()||!t.editProfile.email.trim())return void(yield t.showToast("Veuillez remplir tous les champs obligatoires","warning"));if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.editProfile.email))return void(yield t.showToast("Veuillez saisir une adresse email valide","warning"));const i=yield t.loadingController.create({message:"Sauvegarde en cours...",duration:1500});yield i.present();try{setTimeout((0,p.A)(function*(){t.editProfile.motDePasse.trim()||(t.editProfile.motDePasse=t.userProfile.motDePasse),t.userProfile={...t.editProfile},localStorage.setItem("userProfile",JSON.stringify(t.userProfile)),t.isEditing=!1,yield i.dismiss(),yield t.showToast("Profil mis \xe0 jour avec succ\xe8s","success")}),1500)}catch{yield i.dismiss(),yield t.showToast("Erreur lors de la sauvegarde","danger")}})()}changeProfilePhoto(){this.showPhotoModal=!0}closePhotoModal(){this.showPhotoModal=!1}takePhoto(){var t=this;return(0,p.A)(function*(){t.closePhotoModal();try{const o=yield d.i7.getPhoto({quality:90,allowEditing:!0,resultType:d.LK.DataUrl,source:d.ru.Camera});o.dataUrl&&(t.userProfile.photo=o.dataUrl,localStorage.setItem("userProfile",JSON.stringify(t.userProfile)),yield t.showToast("Photo mise \xe0 jour","success"))}catch(o){console.error("Erreur lors de la prise de photo:",o),yield t.showToast("Erreur lors de la prise de photo","danger")}})()}selectFromGallery(){var t=this;return(0,p.A)(function*(){t.closePhotoModal();try{const o=yield d.i7.getPhoto({quality:90,allowEditing:!0,resultType:d.LK.DataUrl,source:d.ru.Photos});o.dataUrl&&(t.userProfile.photo=o.dataUrl,localStorage.setItem("userProfile",JSON.stringify(t.userProfile)),yield t.showToast("Photo mise \xe0 jour","success"))}catch(o){console.error("Erreur lors de la s\xe9lection de photo:",o),yield t.showToast("Erreur lors de la s\xe9lection de photo","danger")}})()}navigateTo(t){this.router.navigate([t])}showToast(t){var o=this;return(0,p.A)(function*(i,f="success"){yield(yield o.toastController.create({message:i,duration:2e3,position:"bottom",color:f})).present()}).apply(this,arguments)}}return(r=c).\u0275fac=function(t){return new(t||r)(e.rXU(h.Ix),e.rXU(l.GD),e.rXU(l.hG),e.rXU(l.K_),e.rXU(l.Xi))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-profile"]],standalone:!0,features:[e.aNF],decls:42,vars:6,consts:[[1,"ion-no-border"],["slot","start"],["color","primary"],[1,"profile-content"],[1,"profile-photo-section"],[1,"photo-container",3,"click"],[1,"profile-photo"],["alt","Photo de profil",3,"src",4,"ngIf"],["name","person-circle-outline","class","default-avatar",4,"ngIf"],[1,"photo-edit-indicator"],[1,"edit-badge"],["name","camera-outline"],[1,"profile-info-section"],[1,"section-header"],["class","info-form",4,"ngIf"],["class","edit-form",4,"ngIf"],["class","modify-button-container",4,"ngIf"],[3,"didDismiss","isOpen"],[1,"custom-tab-bar"],[3,"click"],["name","home-outline"],["name","business-outline"],["name","map-outline"],[1,"active"],["name","person-outline"],["alt","Photo de profil",3,"src"],["name","person-circle-outline",1,"default-avatar"],[1,"info-form"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","password"],[1,"edit-form"],[1,"form-group"],[1,"form-label"],[1,"form-input"],["placeholder","Entrez votre nom","type","text",3,"ngModelChange","ngModel"],["placeholder","Entrez votre pr\xe9nom","type","text",3,"ngModelChange","ngModel"],["placeholder","Entrez votre email","type","email",3,"ngModelChange","ngModel"],["placeholder","Nouveau mot de passe (optionnel)","type","password",3,"ngModelChange","ngModel"],["placeholder","Entrez votre t\xe9l\xe9phone","type","tel",3,"ngModelChange","ngModel"],[1,"edit-actions"],["fill","outline","color","medium",3,"click"],["name","close-outline","slot","start"],["color","primary",3,"click"],["name","checkmark-outline","slot","start"],[1,"modify-button-container"],["expand","block","color","primary",1,"modify-button",3,"click"],["name","create-outline","slot","start"],[1,"photo-modal-content"],[1,"modal-header"],["fill","clear","size","small",3,"click"],["name","close-outline"],[1,"photo-options"],["expand","block","fill","outline","color","primary",1,"photo-option",3,"click"],["name","camera-outline","slot","start"],["name","images-outline","slot","start"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Mon compte"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"div",4)(8,"div",5),e.bIt("click",function(){return o.changeProfilePhoto()}),e.j41(9,"div",6),e.DNE(10,b,1,1,"img",7)(11,x,1,0,"ion-icon",8),e.k0s(),e.j41(12,"div",9)(13,"div",10),e.nrm(14,"ion-icon",11),e.k0s()()()(),e.j41(15,"div",12)(16,"div",13)(17,"h2"),e.EFF(18,"Informations personnelles"),e.k0s()(),e.DNE(19,M,31,5,"div",14)(20,v,33,5,"div",15)(21,C,4,0,"div",16),e.k0s()(),e.j41(22,"ion-modal",17),e.bIt("didDismiss",function(){return o.closePhotoModal()}),e.DNE(23,O,13,0,"ng-template"),e.k0s(),e.j41(24,"ion-footer",0)(25,"ion-tab-bar",18)(26,"ion-tab-button",19),e.bIt("click",function(){return o.navigateTo("/home")}),e.nrm(27,"ion-icon",20),e.j41(28,"ion-label"),e.EFF(29,"Accueil"),e.k0s()(),e.j41(30,"ion-tab-button",19),e.bIt("click",function(){return o.navigateTo("/cities")}),e.nrm(31,"ion-icon",21),e.j41(32,"ion-label"),e.EFF(33,"Cit\xe9s"),e.k0s()(),e.j41(34,"ion-tab-button",19),e.bIt("click",function(){return o.navigateTo("/map")}),e.nrm(35,"ion-icon",22),e.j41(36,"ion-label"),e.EFF(37,"Carte"),e.k0s()(),e.j41(38,"ion-tab-button",23),e.nrm(39,"ion-icon",24),e.j41(40,"ion-label"),e.EFF(41,"Mon compte"),e.k0s()()()()),2&t&&(e.R7$(10),e.Y8G("ngIf",o.userProfile.photo),e.R7$(),e.Y8G("ngIf",!o.userProfile.photo),e.R7$(8),e.Y8G("ngIf",!o.isEditing),e.R7$(),e.Y8G("ngIf",o.isEditing),e.R7$(),e.Y8G("ngIf",!o.isEditing),e.R7$(),e.Y8G("isOpen",o.showPhotoModal))},dependencies:[m.MD,m.bT,u.YN,u.BC,u.vS,l.W9,l.eU,l.ai,l.BC,l.QW,l.MC,l.Jm,l.iq,l.uz,l.he,l.$w,l.M0,l.Jq,l.qW,l.Sb],styles:['@charset "UTF-8";[_nghost-%COMP%]{--primary-color: #1dd1a1;--secondary-color: #3b82f6;--text-primary: #374151;--text-secondary: #6b7280;--text-muted: #9ca3af;--background: #ffffff;--border-color: #e5e7eb;--shadow: 0 2px 8px rgba(0, 0, 0, .1)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: white;--color: var(--text-primary)}ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--text-primary)}.profile-content[_ngcontent-%COMP%]{--background: #f8f9fa}.profile-photo-section[_ngcontent-%COMP%]{background:#fff;padding:40px 20px;text-align:center;border-bottom:1px solid var(--border-color)}.photo-container[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.profile-photo[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;overflow:hidden;border:4px solid var(--border-color);display:flex;align-items:center;justify-content:center;background:#f8f9fa;position:relative}.profile-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.default-avatar[_ngcontent-%COMP%]{font-size:80px;color:var(--text-muted)}.photo-edit-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0}.edit-badge[_ngcontent-%COMP%]{width:36px;height:36px;background:#fbbf24;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid white;box-shadow:0 2px 8px #00000026}.edit-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.profile-info-section[_ngcontent-%COMP%]{background:#fff;margin:16px;border-radius:12px;padding:20px;box-shadow:var(--shadow)}.section-header[_ngcontent-%COMP%]{margin-bottom:24px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:var(--primary-color)}.info-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 0;border-bottom:1px solid #f0f0f0}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:14px;color:var(--text-primary);font-weight:500;text-align:right}.info-value.password[_ngcontent-%COMP%]{font-family:monospace;letter-spacing:2px}.edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-primary)}.form-input[_ngcontent-%COMP%]{--background: #f8f9fa;--border-color: var(--border-color);--border-radius: 8px;--border-width: 1px;--border-style: solid;--padding-start: 16px;--padding-end: 16px;--min-height: 48px;margin:0}.form-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--text-primary);--placeholder-color: var(--text-muted);font-size:14px}.form-input.item-has-focus[_ngcontent-%COMP%]{--border-color: var(--primary-color);--border-width: 2px}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.edit-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;--border-radius: 8px;height:48px;font-weight:500}.modify-button-container[_ngcontent-%COMP%]{margin-top:32px}.modify-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-top: 16px;--padding-bottom: 16px;font-weight:600;height:56px}.photo-modal-content[_ngcontent-%COMP%]{padding:24px;min-height:200px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:var(--text-primary)}.photo-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.photo-option[_ngcontent-%COMP%]{--border-radius: 12px;--padding-top: 16px;--padding-bottom: 16px;height:56px;font-weight:500}.custom-tab-bar[_ngcontent-%COMP%]{--background: white;--border: 1px solid var(--border-color);height:60px;padding-bottom:env(safe-area-inset-bottom)}ion-tab-button[_ngcontent-%COMP%]{--color: var(--text-muted);--color-selected: var(--primary-color);font-size:12px;flex-direction:column;gap:4px}ion-tab-button.active[_ngcontent-%COMP%]{--color: var(--primary-color)}ion-tab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-tab-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:11px;font-weight:500}@media (max-width: 768px){.profile-info-section[_ngcontent-%COMP%]{margin:12px;padding:16px}.profile-photo[_ngcontent-%COMP%]{width:100px;height:100px}.default-avatar[_ngcontent-%COMP%]{font-size:60px}.edit-badge[_ngcontent-%COMP%]{width:32px;height:32px}.edit-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}}']}),c})()}}]);