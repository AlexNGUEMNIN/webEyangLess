"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7728],{7728:(f,d,a)=>{a.r(d),a.d(d,{UpdateCitePage:()=>_});var s=a(467),m=a(177),l=a(4341),r=a(6087),e=a(4438),u=a(8880),p=a(6766);let _=(()=>{var c;class g{constructor(t,n,o,i,C){this.navCtrl=t,this.alertCtrl=n,this.loadingCtrl=o,this.toastCtrl=i,this.route=C,this.citeName="",this.catchPhrase="",this.description="",this.location="",this.isEditMode=!1,this.citeId=null}ngOnInit(){this.citeId=this.route.snapshot.paramMap.get("id"),this.citeId&&(this.isEditMode=!0,this.loadCiteData())}goBack(){this.hasUnsavedChanges()?this.showUnsavedChangesAlert():this.navCtrl.back()}saveCite(){var t=this;return(0,s.A)(function*(){if(!t.validateForm())return;const n=yield t.loadingCtrl.create({message:t.isEditMode?"Modification en cours...":"Cr\xe9ation en cours...",spinner:"crescent"});yield n.present();try{const o={name:t.citeName.trim(),catchPhrase:t.catchPhrase.trim(),description:t.description.trim(),location:t.location.trim(),updatedAt:(new Date).toISOString()};t.isEditMode?(yield t.updateCite(o),t.showToast("Cit\xe9 modifi\xe9e avec succ\xe8s")):(o.createdAt=(new Date).toISOString(),yield t.createCite(o),t.showToast("Cit\xe9 cr\xe9\xe9e avec succ\xe8s")),yield n.dismiss(),t.navCtrl.back()}catch(o){yield n.dismiss(),t.showErrorAlert("Erreur lors de la sauvegarde"),console.error("Erreur sauvegarde cit\xe9:",o)}})()}validateForm(){return this.citeName.trim()?this.citeName.trim().length<3?(this.showErrorAlert("Le nom de la cit\xe9 doit contenir au moins 3 caract\xe8res"),!1):!!this.catchPhrase.trim()||(this.showErrorAlert("La phrase d'accroche est obligatoire"),!1):(this.showErrorAlert("Le nom de la cit\xe9 est obligatoire"),!1)}loadCiteData(){var t=this;return(0,s.A)(function*(){if(!t.citeId)return;const n=yield t.loadingCtrl.create({message:"Chargement...",spinner:"crescent"});yield n.present();try{const o=yield t.getCiteById(t.citeId);t.citeName=o.name||"",t.catchPhrase=o.catchPhrase||"",t.description=o.description||"",t.location=o.location||"",yield n.dismiss()}catch(o){yield n.dismiss(),t.showErrorAlert("Erreur lors du chargement des donn\xe9es"),console.error("Erreur chargement cit\xe9:",o)}})()}hasUnsavedChanges(){return""!==this.citeName.trim()||""!==this.catchPhrase.trim()||""!==this.description.trim()||""!==this.location.trim()}selectLocation(){var t=this;return(0,s.A)(function*(){yield(yield t.alertCtrl.create({header:"Localisation",message:"S\xe9lectionnez votre localisation",inputs:[{name:"location",type:"text",placeholder:"Entrer la localisation",value:t.location}],buttons:[{text:"Annuler",role:"cancel"},{text:"Confirmer",handler:o=>{o.location&&o.location.trim()&&(t.location=o.location.trim())}}]})).present()})()}showUnsavedChangesAlert(){var t=this;return(0,s.A)(function*(){yield(yield t.alertCtrl.create({header:"Modifications non sauvegard\xe9es",message:"Voulez-vous vraiment quitter sans sauvegarder vos modifications ?",buttons:[{text:"Annuler",role:"cancel"},{text:"Quitter",handler:()=>{t.navCtrl.back()}}]})).present()})()}showErrorAlert(t){var n=this;return(0,s.A)(function*(){yield(yield n.alertCtrl.create({header:"Erreur",message:t,buttons:["OK"]})).present()})()}showToast(t){var n=this;return(0,s.A)(function*(){yield(yield n.toastCtrl.create({message:t,duration:3e3,position:"bottom",color:"success"})).present()})()}createCite(t){return new Promise((n,o)=>{setTimeout(()=>{console.log("Cr\xe9ation cit\xe9:",t),n(t)},1500)})}updateCite(t){return new Promise((n,o)=>{setTimeout(()=>{console.log("Modification cit\xe9:",t),n(t)},1500)})}getCiteById(t){return new Promise((n,o)=>{setTimeout(()=>{n({id:t,name:"Cit\xe9 SHEKINA",catchPhrase:"Cit\xe9 moderne",description:"Une belle cit\xe9 moderne avec tous les \xe9quipements n\xe9cessaires...",location:"Eyang, Lobo"})},1e3)})}}return(c=g).\u0275fac=function(t){return new(t||c)(e.rXU(u.q9),e.rXU(r.hG),e.rXU(r.Xi),e.rXU(r.K_),e.rXU(p.nX))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-update-cite"]],standalone:!0,features:[e.aNF],decls:36,vars:4,consts:[["slot","start"],["fill","clear",3,"click"],["name","arrow-back","color","primary"],["slot","end"],["name","checkmark","color","primary"],[1,"cite-content"],[1,"form-container"],[1,"section-title"],[1,"form-group"],[1,"form-label"],[1,"form-input"],["placeholder","Ex: cit\xe9 SHEKINA","type","text",3,"ngModelChange","ngModel"],["placeholder","Ex: cit\xe9 moderne","type","text",3,"ngModelChange","ngModel"],["button","",1,"form-location",3,"click"],[1,"location-text"],["name","location","slot","end",1,"location-icon"],[1,"form-textarea"],["placeholder","Entrer une description","rows","8","autoGrow","true",3,"ngModelChange","ngModel"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return n.goBack()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Cit\xe9"),e.k0s(),e.j41(7,"ion-buttons",3)(8,"ion-button",1),e.bIt("click",function(){return n.saveCite()}),e.nrm(9,"ion-icon",4),e.k0s()()()(),e.j41(10,"ion-content",5)(11,"div",6)(12,"h2",7),e.EFF(13,"Informations g\xe9n\xe9rales"),e.k0s(),e.j41(14,"div",8)(15,"ion-label",9),e.EFF(16,"Nom de la cit\xe9"),e.k0s(),e.j41(17,"ion-item",10)(18,"ion-input",11),e.mxI("ngModelChange",function(i){return e.DH7(n.citeName,i)||(n.citeName=i),i}),e.k0s()()(),e.j41(19,"div",8)(20,"ion-label",9),e.EFF(21,"Phrase d'accroche"),e.k0s(),e.j41(22,"ion-item",10)(23,"ion-input",12),e.mxI("ngModelChange",function(i){return e.DH7(n.catchPhrase,i)||(n.catchPhrase=i),i}),e.k0s()()(),e.j41(24,"div",8)(25,"ion-label",9),e.EFF(26,"Localisation"),e.k0s(),e.j41(27,"ion-item",13),e.bIt("click",function(){return n.selectLocation()}),e.j41(28,"ion-label",14),e.EFF(29),e.k0s(),e.nrm(30,"ion-icon",15),e.k0s()(),e.j41(31,"div",8)(32,"ion-label",9),e.EFF(33,"Description"),e.k0s(),e.j41(34,"ion-item",16)(35,"ion-textarea",17),e.mxI("ngModelChange",function(i){return e.DH7(n.description,i)||(n.description=i),i}),e.k0s()()()()()),2&t&&(e.R7$(18),e.R50("ngModel",n.citeName),e.R7$(5),e.R50("ngModel",n.catchPhrase),e.R7$(6),e.JRh(n.location||"S\xe9lectionner une localisation"),e.R7$(6),e.R50("ngModel",n.description))},dependencies:[r.QW,r.Jm,r.iq,r.he,r.uz,r.W9,r.eU,r.BC,r.ai,m.MD,l.YN,l.BC,l.vS],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: white;--color: #333;--border-color: #e0e0e0}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;text-align:center;color:#333}ion-header[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #26d0ce}ion-header[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#26d0ce}.cite-content[_ngcontent-%COMP%]{--background: #f8f9fa;--padding-start: 0;--padding-end: 0}.form-container[_ngcontent-%COMP%]{padding:24px 16px}.section-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;color:#333;margin:0 0 32px}.form-group[_ngcontent-%COMP%]{margin-bottom:32px}.form-label[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:500;color:#333;margin-bottom:8px}.form-input[_ngcontent-%COMP%]{--background: white;--border-radius: 12px;--border-color: #e0e0e0;--border-style: solid;--border-width: 1px;--padding-start: 16px;--padding-end: 16px;--min-height: 48px;margin:0}.form-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--placeholder-color: #999;--placeholder-opacity: 1;--color: #333;font-size:1rem}.form-textarea[_ngcontent-%COMP%]{--background: white;--border-radius: 12px;--border-color: #e0e0e0;--border-style: solid;--border-width: 1px;--padding-start: 16px;--padding-end: 16px;--padding-top: 12px;--padding-bottom: 12px;margin:0;align-items:flex-start}.form-textarea[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--placeholder-color: #999;--placeholder-opacity: 1;--color: #333;font-size:1rem;min-height:120px}.form-location[_ngcontent-%COMP%]{--background: white;--border-radius: 12px;--border-color: #e0e0e0;--border-style: solid;--border-width: 1px;--padding-start: 16px;--padding-end: 16px;--min-height: 48px;margin:0;cursor:pointer}.location-text[_ngcontent-%COMP%]{color:#333;font-size:1rem;font-weight:400}.location-icon[_ngcontent-%COMP%]{color:#26d0ce;font-size:1.3rem;margin-left:8px}.form-input[_ngcontent-%COMP%]:focus-within, .form-textarea[_ngcontent-%COMP%]:focus-within, .form-location[_ngcontent-%COMP%]:focus-within{--border-color: #26d0ce;--border-width: 2px}.form-input[_ngcontent-%COMP%]::part(native), .form-textarea[_ngcontent-%COMP%]::part(native){border:none;box-shadow:none}@media (max-width: 480px){.form-container[_ngcontent-%COMP%]{padding:20px 12px}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}}"]}),g})()}}]);