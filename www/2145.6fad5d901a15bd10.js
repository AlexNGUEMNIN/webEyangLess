"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2145],{2145:(v,d,s)=>{s.r(d),s.d(d,{ReservationPaymentPage:()=>M});var u=s(467),g=s(177),p=s(4341),o=s(6087),h=s(5079),m=s(5873),e=s(4438),_=s(6766);function y(i,c){if(1&i){const a=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"h2"),e.EFF(3,"R\xe9sum\xe9 de la facture"),e.k0s(),e.j41(4,"ion-button",34),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.closeSummary())}),e.nrm(5,"ion-icon",35),e.k0s()(),e.j41(6,"div",36)(7,"div",37)(8,"span",38),e.EFF(9,"Frais de r\xe9servation"),e.k0s(),e.j41(10,"span",39),e.EFF(11),e.nI1(12,"number"),e.k0s()(),e.j41(13,"div",37)(14,"span",38),e.EFF(15,"Mode de paiement"),e.k0s(),e.j41(16,"span",40),e.EFF(17),e.k0s()(),e.j41(18,"div",37)(19,"span",38),e.EFF(20,"Num\xe9ro de paiement"),e.k0s(),e.j41(21,"span",40),e.EFF(22),e.k0s()(),e.j41(23,"div",37)(24,"span",38),e.EFF(25,"Paiement au nom de"),e.k0s(),e.j41(26,"span",40),e.EFF(27),e.k0s()()(),e.j41(28,"ion-button",41),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.processPayment())}),e.EFF(29," Payer "),e.k0s()()}if(2&i){const a=e.XpG();e.R7$(11),e.SpI("",e.bMT(12,4,a.paymentData.amount)," FCFA"),e.R7$(6),e.JRh(a.getPaymentMethodName()),e.R7$(5),e.JRh(a.formatPhoneNumber()),e.R7$(5),e.JRh(a.paymentData.responsibleName)}}function f(i,c){if(1&i){const a=e.RV6();e.j41(0,"div",42)(1,"div",43),e.nrm(2,"ion-icon",44),e.k0s(),e.j41(3,"h2"),e.EFF(4,"Paiement effectu\xe9 avec succ\xe8s"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Votre r\xe9servation a \xe9t\xe9 enregistr\xe9e avec succ\xe8s"),e.k0s(),e.j41(7,"ion-button",45),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.goToReservations())}),e.EFF(8,"OK"),e.k0s()()}}function P(i,c){if(1&i){const a=e.RV6();e.j41(0,"div",46)(1,"div",47),e.nrm(2,"ion-icon",35),e.k0s(),e.j41(3,"h2"),e.EFF(4,"\xc9chec du paiement"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Quelque chose s'est mal pass\xe9"),e.k0s(),e.j41(7,"div",48)(8,"ion-button",49),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.closeError())}),e.EFF(9,"Annuler"),e.k0s(),e.j41(10,"ion-button",45),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.retryPayment())}),e.EFF(11,"R\xe9essayer"),e.k0s()()()}}let M=(()=>{var i;class c{constructor(t,n,l,r,b){this.router=t,this.route=n,this.alertController=l,this.loadingController=r,this.toastController=b,this.showSummaryModal=!1,this.showSuccessModal=!1,this.showErrorModal=!1,this.paymentData={amount:1e4,paymentMethod:"orange",phoneNumber:"",responsibleName:""},(0,h.a)({chevronBackOutline:m.fKZ,warningOutline:m.bO5,informationCircleOutline:m.jdS,closeOutline:m.xfX,checkmarkCircleOutline:m.gz2})}ngOnInit(){this.route.queryParams.subscribe(t=>{this.cityId=t.cityId,this.roomId=t.roomId,this.floor=t.floor})}isFormValid(){return!!(this.paymentData.phoneNumber.trim().length>=9&&this.paymentData.responsibleName.trim().length>=2&&this.paymentData.paymentMethod)}getPaymentMethodName(){return"orange"===this.paymentData.paymentMethod?"Orange Money":"MTN Mobile Money"}formatPhoneNumber(){const t=this.paymentData.phoneNumber;return 9===t.length?`${t.slice(0,1)} ${t.slice(1,3)} ${t.slice(3,5)} ${t.slice(5,7)} ${t.slice(7,9)}`:t}showSummary(){this.isFormValid()?this.showSummaryModal=!0:this.showToast("Veuillez remplir tous les champs")}closeSummary(){this.showSummaryModal=!1}processPayment(){var t=this;return(0,u.A)(function*(){t.closeSummary();const n=yield t.loadingController.create({message:"Traitement du paiement...",duration:3e3});yield n.present(),setTimeout(()=>{n.dismiss(),Math.random()>.2?(t.saveReservation(),t.showSuccessModal=!0):t.showErrorModal=!0},3e3)})()}saveReservation(){const t={id:Date.now(),cityName:"R\xe9servation cit\xe9 Bevina",date:(new Date).toLocaleDateString("fr-FR"),roomId:this.roomId,floor:this.floor,amount:this.paymentData.amount,paymentMethod:this.getPaymentMethodName(),responsibleName:this.paymentData.responsibleName,phoneNumber:this.paymentData.phoneNumber,status:"reservee",timestamp:(new Date).toISOString()},n=JSON.parse(localStorage.getItem("userReservations")||"[]");n.push(t),localStorage.setItem("userReservations",JSON.stringify(n)),localStorage.removeItem("pendingReservation")}closeSuccess(){this.showSuccessModal=!1}closeError(){this.showErrorModal=!1}retryPayment(){this.closeError(),this.showSummary()}goToReservations(){this.closeSuccess(),this.router.navigate(["/reservations"])}showToast(t){var n=this;return(0,u.A)(function*(){yield(yield n.toastController.create({message:t,duration:2e3,position:"bottom",color:"warning"})).present()})()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.rXU(_.Ix),e.rXU(_.nX),e.rXU(o.hG),e.rXU(o.Xi),e.rXU(o.K_))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-reservation-payment"]],standalone:!0,features:[e.aNF],decls:74,vars:14,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/room-selection","color","primary"],[1,"payment-content"],[1,"subtitle-section"],[1,"delay-alert"],[1,"alert-icon"],["name","warning-outline"],[1,"alert-content"],[1,"form-section"],[1,"amount-section"],[1,"amount-item"],[1,"amount-label"],[1,"amount-value"],[1,"payment-method-section"],[3,"ngModelChange","ngModel"],[1,"payment-option"],["slot","start","value","orange"],[1,"payment-info"],[1,"payment-logo","orange"],["slot","start","value","mtn"],[1,"payment-logo","mtn"],[1,"input-section"],[1,"input-group"],[1,"input-label"],[1,"input-item"],["placeholder","Entrer un num\xe9ro de t\xe9l\xe9phone","type","tel","maxlength","9",3,"ngModelChange","ngModel"],["placeholder","Entrer le nom du responsable de la r\xe9servation","type","text",3,"ngModelChange","ngModel"],[1,"info-note"],["name","information-circle-outline"],["expand","block","color","primary",1,"submit-button",3,"click","disabled"],[3,"didDismiss","isOpen"],[1,"summary-modal"],[1,"modal-header"],["fill","clear","size","small",3,"click"],["name","close-outline"],[1,"summary-content"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value","primary"],[1,"summary-value"],["expand","block","color","primary",1,"pay-button",3,"click"],[1,"result-modal","success"],[1,"result-icon"],["name","checkmark-circle-outline"],["color","primary",3,"click"],[1,"result-modal","error"],[1,"result-icon","error"],[1,"error-actions"],["fill","outline","color","medium",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Frais de r\xe9servation"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"div",4)(8,"p"),e.EFF(9,"Proc\xe9der \xe0 la r\xe9servation de votre chambre"),e.k0s()(),e.j41(10,"div",5)(11,"div",6),e.nrm(12,"ion-icon",7),e.k0s(),e.j41(13,"div",8)(14,"h3"),e.EFF(15,"D\xe9lai de 7 jours (1 semaine)"),e.k0s(),e.j41(16,"p"),e.EFF(17," Une fois les frais de r\xe9servation pay\xe9s, vous disposerez d'un d\xe9lai de "),e.j41(18,"strong"),e.EFF(19,"7 jours"),e.k0s(),e.EFF(20," pour payer le montant requis pour valider votre location. "),e.k0s(),e.j41(21,"p"),e.EFF(22," Pass\xe9 ce d\xe9lai et votre chambre sera de nouveau libre et r\xe9servable par d'autres utilisateurs. "),e.k0s()()(),e.j41(23,"div",9)(24,"h2"),e.EFF(25,"Formulaire de r\xe9servation"),e.k0s(),e.j41(26,"div",10)(27,"div",11)(28,"span",12),e.EFF(29,"Frais de r\xe9servation"),e.k0s(),e.j41(30,"span",13),e.EFF(31),e.nI1(32,"number"),e.k0s()()(),e.j41(33,"div",14)(34,"h3"),e.EFF(35,"Mode de paiement"),e.k0s(),e.j41(36,"ion-radio-group",15),e.mxI("ngModelChange",function(r){return e.DH7(n.paymentData.paymentMethod,r)||(n.paymentData.paymentMethod=r),r}),e.j41(37,"div",16),e.nrm(38,"ion-radio",17),e.j41(39,"div",18)(40,"div",19),e.EFF(41,"\u{1f7e0}"),e.k0s(),e.j41(42,"span"),e.EFF(43,"Orange Money"),e.k0s()()(),e.j41(44,"div",16),e.nrm(45,"ion-radio",20),e.j41(46,"div",18)(47,"div",21),e.EFF(48,"\u{1f4f1}"),e.k0s(),e.j41(49,"span"),e.EFF(50,"MTN Mobile Money"),e.k0s()()()()(),e.j41(51,"div",22)(52,"div",23)(53,"ion-label",24),e.EFF(54,"Num\xe9ro de t\xe9l\xe9phone pour le d\xe9p\xf4t"),e.k0s(),e.j41(55,"ion-item",25)(56,"ion-input",26),e.mxI("ngModelChange",function(r){return e.DH7(n.paymentData.phoneNumber,r)||(n.paymentData.phoneNumber=r),r}),e.k0s()()(),e.j41(57,"div",23)(58,"ion-label",24),e.EFF(59,"Paiement au nom de"),e.k0s(),e.j41(60,"ion-item",25)(61,"ion-input",27),e.mxI("ngModelChange",function(r){return e.DH7(n.paymentData.responsibleName,r)||(n.paymentData.responsibleName=r),r}),e.k0s()()()(),e.j41(62,"div",28),e.nrm(63,"ion-icon",29),e.j41(64,"span"),e.EFF(65,"Aucun frais suppl\xe9mentaire ne sera d\xe9bit\xe9"),e.k0s()(),e.j41(66,"ion-button",30),e.bIt("click",function(){return n.showSummary()}),e.EFF(67," Soumettre "),e.k0s()()(),e.j41(68,"ion-modal",31),e.bIt("didDismiss",function(){return n.closeSummary()}),e.DNE(69,y,30,6,"ng-template"),e.k0s(),e.j41(70,"ion-modal",31),e.bIt("didDismiss",function(){return n.closeSuccess()}),e.DNE(71,f,9,0,"ng-template"),e.k0s(),e.j41(72,"ion-modal",31),e.bIt("didDismiss",function(){return n.closeError()}),e.DNE(73,P,12,0,"ng-template"),e.k0s()),2&t&&(e.R7$(31),e.SpI("",e.bMT(32,12,n.paymentData.amount)," FCFA"),e.R7$(5),e.R50("ngModel",n.paymentData.paymentMethod),e.R7$(),e.AVh("selected","orange"===n.paymentData.paymentMethod),e.R7$(7),e.AVh("selected","mtn"===n.paymentData.paymentMethod),e.R7$(12),e.R50("ngModel",n.paymentData.phoneNumber),e.R7$(5),e.R50("ngModel",n.paymentData.responsibleName),e.R7$(5),e.Y8G("disabled",!n.isFormValid()),e.R7$(2),e.Y8G("isOpen",n.showSummaryModal),e.R7$(2),e.Y8G("isOpen",n.showSuccessModal),e.R7$(2),e.Y8G("isOpen",n.showErrorModal))},dependencies:[g.MD,g.QX,p.YN,p.BC,p.tU,p.vS,o.W9,o.eU,o.ai,o.BC,o.QW,o.el,o.Jm,o.iq,o.uz,o.he,o.$w,o.f0,o.KO,o.Sb],styles:['@charset "UTF-8";[_nghost-%COMP%]{--primary-color: #1dd1a1;--warning-color: #f59e0b;--success-color: #10b981;--error-color: #ef4444;--text-primary: #374151;--text-secondary: #6b7280;--background: #ffffff;--border-color: #e5e7eb}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: white;--color: var(--text-primary)}ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--text-primary)}.payment-content[_ngcontent-%COMP%]{--background: #f8f9fa;--padding-bottom: 20px}.subtitle-section[_ngcontent-%COMP%]{background:#fff;padding:16px 20px;border-bottom:1px solid var(--border-color)}.subtitle-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--text-secondary);text-align:center}.delay-alert[_ngcontent-%COMP%]{background:#fef3c7;border:1px solid #fbbf24;border-radius:12px;margin:16px;padding:16px;display:flex;gap:12px}.alert-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.alert-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#d97706}.alert-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:600;color:#92400e}.alert-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#92400e;line-height:1.5}.alert-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-section[_ngcontent-%COMP%]{background:#fff;margin:16px;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:18px;font-weight:600;color:var(--text-primary)}.amount-section[_ngcontent-%COMP%]{margin-bottom:24px}.amount-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 0}.amount-label[_ngcontent-%COMP%]{font-size:16px;color:var(--text-primary);font-weight:500}.amount-value[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--primary-color)}.payment-method-section[_ngcontent-%COMP%]{margin-bottom:24px}.payment-method-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:var(--text-primary)}.payment-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border:2px solid var(--border-color);border-radius:12px;margin-bottom:12px;cursor:pointer;transition:all .3s ease}.payment-option.selected[_ngcontent-%COMP%]{border-color:var(--primary-color);background:#f0fdf4}.payment-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.payment-logo[_ngcontent-%COMP%]{font-size:20px}.payment-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--text-primary)}.input-section[_ngcontent-%COMP%]{margin-bottom:24px}.input-group[_ngcontent-%COMP%]{margin-bottom:20px}.input-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:var(--text-primary);margin-bottom:8px}.input-item[_ngcontent-%COMP%]{--background: #f8f9fa;--border-color: var(--border-color);--border-radius: 8px;--border-width: 1px;--border-style: solid;--padding-start: 16px;--padding-end: 16px;--min-height: 48px;margin:0}.input-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--text-primary);--placeholder-color: #9ca3af;font-size:14px}.info-note[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:24px;padding:12px;background:#f0f9ff;border-radius:8px}.info-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#0284c7}.info-note[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#0284c7}.submit-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-top: 16px;--padding-bottom: 16px;height:56px;font-weight:600;margin-top:8px}.submit-button[_ngcontent-%COMP%]:disabled{--background: #d1d5db;--color: #9ca3af}.summary-modal[_ngcontent-%COMP%]{padding:24px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:var(--text-primary)}.summary-content[_ngcontent-%COMP%]{margin-bottom:24px}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}.summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-label[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary)}.summary-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-primary)}.summary-value.primary[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600}.pay-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-top: 16px;--padding-bottom: 16px;height:56px;font-weight:600}.result-modal[_ngcontent-%COMP%]{padding:40px 24px;text-align:center}.result-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;background:#1f2937}.result-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;color:var(--success-color)}.result-icon.error[_ngcontent-%COMP%]{background:var(--error-color)}.result-icon.error[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.result-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;font-weight:600;color:var(--text-primary)}.result-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:16px;color:var(--text-secondary)}.error-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.error-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;--border-radius: 8px;height:48px;font-weight:500}@media (max-width: 768px){.form-section[_ngcontent-%COMP%]{margin:12px;padding:16px}.delay-alert[_ngcontent-%COMP%]{margin:12px;padding:12px}.summary-modal[_ngcontent-%COMP%], .result-modal[_ngcontent-%COMP%]{padding:20px}}']}),c})()}}]);