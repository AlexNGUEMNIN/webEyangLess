"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[446],{446:(P,u,a)=>{a.r(u),a.d(u,{CodeVerificationPage:()=>v});var p=a(467),l=a(6087),f=a(5079),_=a(5873),e=a(4438),g=a(6766),m=a(177),h=a(2628),C=a(9420);const b=["input0","input1","input2","input3","input4","input5"];let v=(()=>{var s;class d{constructor(i,t,n,o){this.router=i,this.location=t,this.authService=n,this.alertCtrl=o,this.verificationCode=["","","","","",""],this.timeRemaining=45,(0,f.a)({chevronBackOutline:_.fKZ})}ngOnInit(){this.startTimer()}ngOnDestroy(){this.timer&&clearInterval(this.timer)}goBack(){this.location.back()}onCodeInput(i,t){const n=i.target.value;if(n.match(/[0-9]/)){if(this.verificationCode[t]=n,t<5){const o=this.inputs.toArray()[t+1];o&&o.nativeElement.focus()}}else i.target.value="",this.verificationCode[t]=""}onKeyDown(i,t){if("Backspace"===i.key&&!this.verificationCode[t]&&t>0){const n=this.inputs.toArray()[t-1];n&&(this.verificationCode[t-1]="",n.nativeElement.value="",n.nativeElement.focus())}!/[0-9]/.test(i.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(i.key)&&i.preventDefault()}onPaste(i){var t;i.preventDefault();const n=null===(t=i.clipboardData)||void 0===t?void 0:t.getData("text");if(n&&n.match(/^\d{6}$/))for(let o=0;o<6;o++){this.verificationCode[o]=n[o];const r=this.inputs.toArray()[o];r&&(r.nativeElement.value=n[o])}}startTimer(){this.timer=setInterval(()=>{this.timeRemaining>0?this.timeRemaining--:clearInterval(this.timer)},1e3)}formatTime(i){const n=i%60;return`${Math.floor(i/60).toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}resendCode(){0===this.timeRemaining&&(console.log("Renvoi du code..."),this.timeRemaining=45,this.startTimer(),this.verificationCode=["","","","","",""],this.inputs.forEach(i=>{i.nativeElement.value=""}),this.inputs.first&&this.inputs.first.nativeElement.focus())}verifyCode(){const i=this.verificationCode.join("");if(6===i.length){console.log("Code \xe0 v\xe9rifier:",i);let t=localStorage.getItem("email");this.authService.verifyOTP(t,i).subscribe({next:n=>{console.log("Succ\xe8s:",n),this.showAlert("Compte activ\xe9","Votre compte vient d'\xeatre activ\xe9 avec succ\xe8s !"),this.router.navigate(["/home"])},error:n=>{200===n.status?(console.log("Succ\xe8s:",n.error.text),this.router.navigate(["/home"])):console.error("Erreur:",n)}})}}showAlert(i,t){var n=this;return(0,p.A)(function*(){yield(yield n.alertCtrl.create({header:i,message:t,buttons:["Ok"]})).present()})()}}return(s=d).\u0275fac=function(i){return new(i||s)(e.rXU(g.Ix),e.rXU(m.aZ),e.rXU(h.u),e.rXU(C.hG))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-code-verification"]],viewQuery:function(i,t){if(1&i&&e.GBs(b,5),2&i){let n;e.mGM(n=e.lsd())&&(t.inputs=n)}},standalone:!0,features:[e.aNF],decls:37,vars:15,consts:[["input0",""],["input1",""],["input2",""],["input3",""],["input4",""],["input5",""],[1,"code-content"],[1,"code-container"],[1,"header"],[1,"back-button",3,"click"],["name","chevron-back-outline"],[1,"logo-container"],[1,"brand-name"],[1,"page-title"],[1,"main-content"],[1,"instruction-text"],[1,"code-inputs"],["type","text","maxlength","1",1,"code-input",3,"input","keydown","paste"],["type","text","maxlength","1",1,"code-input",3,"input","keydown"],[1,"timer-section"],[1,"timer-text"],[1,"timer"],[1,"resend-text"],[1,"resend-button",3,"click","disabled"],[1,"verify-button",3,"click","disabled"]],template:function(i,t){if(1&i){const n=e.RV6();e.j41(0,"ion-content",6)(1,"div",7)(2,"div",8)(3,"button",9),e.bIt("click",function(){return e.eBV(n),e.Njj(t.goBack())}),e.nrm(4,"ion-icon",10),e.k0s(),e.j41(5,"div",11)(6,"h1",12),e.EFF(7,"EyangLess"),e.k0s()(),e.j41(8,"h2",13),e.EFF(9,"Code de v\xe9rification"),e.k0s()(),e.j41(10,"div",14)(11,"p",15),e.EFF(12," Veuillez saisir le code de v\xe9rification que vous avez re\xe7u sur votre num\xe9ro de t\xe9l\xe9phone. "),e.k0s(),e.j41(13,"div",16)(14,"input",17,0),e.bIt("input",function(r){return e.eBV(n),e.Njj(t.onCodeInput(r,0))})("keydown",function(r){return e.eBV(n),e.Njj(t.onKeyDown(r,0))})("paste",function(r){return e.eBV(n),e.Njj(t.onPaste(r))}),e.k0s(),e.j41(16,"input",18,1),e.bIt("input",function(r){return e.eBV(n),e.Njj(t.onCodeInput(r,1))})("keydown",function(r){return e.eBV(n),e.Njj(t.onKeyDown(r,1))}),e.k0s(),e.j41(18,"input",18,2),e.bIt("input",function(r){return e.eBV(n),e.Njj(t.onCodeInput(r,2))})("keydown",function(r){return e.eBV(n),e.Njj(t.onKeyDown(r,2))}),e.k0s(),e.j41(20,"input",18,3),e.bIt("input",function(r){return e.eBV(n),e.Njj(t.onCodeInput(r,3))})("keydown",function(r){return e.eBV(n),e.Njj(t.onKeyDown(r,3))}),e.k0s(),e.j41(22,"input",18,4),e.bIt("input",function(r){return e.eBV(n),e.Njj(t.onCodeInput(r,4))})("keydown",function(r){return e.eBV(n),e.Njj(t.onKeyDown(r,4))}),e.k0s(),e.j41(24,"input",18,5),e.bIt("input",function(r){return e.eBV(n),e.Njj(t.onCodeInput(r,5))})("keydown",function(r){return e.eBV(n),e.Njj(t.onKeyDown(r,5))}),e.k0s()(),e.j41(26,"div",19)(27,"p",20),e.EFF(28," Temps restant : "),e.j41(29,"span",21),e.EFF(30),e.k0s()(),e.j41(31,"p",22),e.EFF(32," Vous n'avez pas re\xe7u de code ? "),e.j41(33,"button",23),e.bIt("click",function(){return e.eBV(n),e.Njj(t.resendCode())}),e.EFF(34," Renvoyer "),e.k0s()()(),e.j41(35,"button",24),e.bIt("click",function(){return e.eBV(n),e.Njj(t.verifyCode())}),e.EFF(36," V\xe9rifier "),e.k0s()()()()}2&i&&(e.R7$(14),e.AVh("filled",t.verificationCode[0]),e.R7$(2),e.AVh("filled",t.verificationCode[1]),e.R7$(2),e.AVh("filled",t.verificationCode[2]),e.R7$(2),e.AVh("filled",t.verificationCode[3]),e.R7$(2),e.AVh("filled",t.verificationCode[4]),e.R7$(2),e.AVh("filled",t.verificationCode[5]),e.R7$(6),e.JRh(t.formatTime(t.timeRemaining)),e.R7$(3),e.Y8G("disabled",t.timeRemaining>0),e.R7$(2),e.Y8G("disabled",6!==t.verificationCode.length))},dependencies:[l.W9,l.iq],styles:['@charset "UTF-8";.code-content[_ngcontent-%COMP%]{--background: #ffffff}.code-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{text-align:center;padding:60px 20px 40px;background:#fff;position:relative;box-shadow:none}.back-button[_ngcontent-%COMP%]{position:absolute;left:20px;top:70px;background:none;border:none;color:#10b981;font-size:24px;cursor:pointer;padding:8px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#10b98114}.logo-container[_ngcontent-%COMP%]{margin-bottom:30px}.brand-name[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#10b981;margin:0;letter-spacing:-.5px}.page-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#10b981;margin:0}.main-content[_ngcontent-%COMP%]{flex:1;padding:40px 20px 20px;display:flex;flex-direction:column}.instruction-text[_ngcontent-%COMP%]{font-size:16px;color:#374151;text-align:center;line-height:1.5;margin-bottom:40px}.code-inputs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-bottom:40px}.code-input[_ngcontent-%COMP%]{width:48px;height:56px;border:2px solid #e5e7eb;border-radius:12px;text-align:center;font-size:24px;font-weight:600;color:#374151;background-color:#fff;transition:all .3s ease}.code-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#10b981;box-shadow:0 0 0 3px #10b9811a}.code-input.filled[_ngcontent-%COMP%]{border-color:#10b981;background-color:#f0fdf4}.timer-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.timer-text[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-bottom:12px}.timer[_ngcontent-%COMP%]{color:#10b981;font-weight:600}.resend-text[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.resend-button[_ngcontent-%COMP%]{background:none;border:none;color:#10b981;font-weight:600;text-decoration:underline;cursor:pointer;padding:0;margin-left:4px;transition:opacity .3s ease}.resend-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;text-decoration:none}.resend-button[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.8}.verify-button[_ngcontent-%COMP%]{width:100%;height:52px;background:linear-gradient(135deg,#1dd1a1,#10b981);border:none;border-radius:12px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:auto;margin-bottom:20px}.verify-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #10b9814d}.verify-button[_ngcontent-%COMP%]:disabled{background:#d1d5db;color:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none}.verify-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}']}),d})()}}]);