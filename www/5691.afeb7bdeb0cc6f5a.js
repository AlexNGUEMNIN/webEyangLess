"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5691],{5691:(v,f,l)=>{l.r(f),l.d(f,{RoomSelectionPage:()=>x});var m=l(467),u=l(177),s=l(6087),_=l(5079),g=l(5873),e=l(4438),p=l(6766);function b(n,a){if(1&n){const r=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){const t=e.eBV(r).$implicit,i=e.XpG();return e.Njj(i.selectRoom(t))}),e.EFF(1),e.k0s()}if(2&n){const r=a.$implicit;e.AVh("taken","prise"===r.status)("reserved","reservee"===r.status)("selected","selected"===r.status)("libre","libre"===r.status),e.R7$(),e.SpI(" ",r.id," ")}}function h(n,a){if(1&n){const r=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){const t=e.eBV(r).$implicit,i=e.XpG();return e.Njj(i.selectRoom(t))}),e.EFF(1),e.k0s()}if(2&n){const r=a.$implicit;e.AVh("taken","prise"===r.status)("reserved","reservee"===r.status)("selected","selected"===r.status)("libre","libre"===r.status),e.R7$(),e.SpI(" ",r.id," ")}}let x=(()=>{var n;class a{constructor(o,t,i,c,d){this.router=o,this.route=t,this.location=i,this.loadingController=c,this.toastController=d,this.currentFloorIndex=0,this.floors=[{name:"RDC",code:"rdc",rooms:[{id:"A1",status:"prise",floor:"rdc"},{id:"A2",status:"prise",floor:"rdc"},{id:"A3",status:"prise",floor:"rdc"},{id:"A4",status:"prise",floor:"rdc"},{id:"A5",status:"libre",floor:"rdc"},{id:"A6",status:"libre",floor:"rdc"},{id:"A7",status:"libre",floor:"rdc"},{id:"A8",status:"libre",floor:"rdc"},{id:"A9",status:"prise",floor:"rdc"},{id:"A10",status:"prise",floor:"rdc"},{id:"A11",status:"libre",floor:"rdc"},{id:"A12",status:"reservee",floor:"rdc"},{id:"A13",status:"libre",floor:"rdc"},{id:"A14",status:"libre",floor:"rdc"}]},{name:"1er \xe9tage",code:"1er",rooms:[{id:"B1",status:"libre",floor:"1er"},{id:"B2",status:"prise",floor:"1er"},{id:"B3",status:"libre",floor:"1er"},{id:"B4",status:"libre",floor:"1er"},{id:"B5",status:"prise",floor:"1er"},{id:"B6",status:"libre",floor:"1er"},{id:"B7",status:"libre",floor:"1er"},{id:"B8",status:"libre",floor:"1er"},{id:"B9",status:"libre",floor:"1er"},{id:"B10",status:"prise",floor:"1er"},{id:"B11",status:"libre",floor:"1er"},{id:"B12",status:"libre",floor:"1er"},{id:"B13",status:"reservee",floor:"1er"},{id:"B14",status:"libre",floor:"1er"}]}],(0,_.a)({chevronBackOutline:g.fKZ,chevronForwardOutline:g.N05,chevronBack:g.fcl,chevronForward:g.fZ})}ngOnInit(){this.cityId=Number(this.route.snapshot.paramMap.get("id"))}get currentFloor(){return this.floors[this.currentFloorIndex]}getLeftRooms(){return this.currentFloor.rooms.slice(0,7)}getRightRooms(){return this.currentFloor.rooms.slice(7)}previousFloor(){this.currentFloorIndex>0&&(this.currentFloorIndex--,this.clearSelection())}nextFloor(){this.currentFloorIndex<this.floors.length-1&&(this.currentFloorIndex++,this.clearSelection())}selectRoom(o){"prise"===o.status||"reservee"===o.status||(this.clearSelection(),o.status="selected",this.selectedRoom=o)}clearSelection(){this.floors.forEach(o=>{o.rooms.forEach(t=>{"selected"===t.status&&(t.status="libre")})}),this.selectedRoom=void 0}proceedToPayment(){var o=this;return(0,m.A)(function*(){if(!o.selectedRoom)return void(yield o.showToast("Veuillez s\xe9lectionner une chambre"));const t=yield o.loadingController.create({message:"Pr\xe9paration...",duration:1e3});yield t.present();const i={cityId:o.cityId,roomId:o.selectedRoom.id,floor:o.selectedRoom.floor,timestamp:(new Date).toISOString()};localStorage.setItem("pendingReservation",JSON.stringify(i)),setTimeout(()=>{var c,d;t.dismiss(),o.router.navigate(["/reservation-payment"],{queryParams:{cityId:o.cityId,roomId:null===(c=o.selectedRoom)||void 0===c?void 0:c.id,floor:null===(d=o.selectedRoom)||void 0===d?void 0:d.floor}})},1e3)})()}showToast(o){var t=this;return(0,m.A)(function*(){yield(yield t.toastController.create({message:o,duration:2e3,position:"bottom",color:"warning"})).present()})()}}return(n=a).\u0275fac=function(o){return new(o||n)(e.rXU(p.Ix),e.rXU(p.nX),e.rXU(u.aZ),e.rXU(s.Xi),e.rXU(s.K_))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-room-selection"]],standalone:!0,features:[e.aNF],decls:46,vars:6,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/city-details","color","primary"],[1,"room-selection-content"],[1,"plan-section"],[1,"legend"],[1,"legend-item"],[1,"legend-dot","taken"],[1,"legend-dot","reserved"],[1,"legend-dot","selected"],[1,"instruction"],[1,"floor-navigation"],["fill","clear","size","small",3,"click","disabled"],["name","chevron-back","slot","icon-only"],[1,"floor-indicator"],["name","chevron-forward","slot","icon-only"],[1,"room-plan"],[1,"room-grid"],[1,"room-side","left-side"],["class","room-cell",3,"taken","reserved","selected","libre","click",4,"ngFor","ngForOf"],[1,"corridor"],[1,"corridor-label"],[1,"room-side","right-side"],[1,"entrance-label"],[1,"action-section"],["expand","block","color","primary",1,"next-button",3,"click","disabled"],[1,"room-cell",3,"click"]],template:function(o,t){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Choisir votre chambre"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"div",4)(8,"h2"),e.EFF(9,"Plan de la cit\xe9"),e.k0s(),e.j41(10,"div",5)(11,"div",6),e.nrm(12,"div",7),e.j41(13,"span"),e.EFF(14,"Chambre prise"),e.k0s()(),e.j41(15,"div",6),e.nrm(16,"div",8),e.j41(17,"span"),e.EFF(18,"Chambre r\xe9serv\xe9e (prise mais impay\xe9e)"),e.k0s()(),e.j41(19,"div",6),e.nrm(20,"div",9),e.j41(21,"span"),e.EFF(22,"Votre choix"),e.k0s()()(),e.j41(23,"p",10),e.EFF(24,"Cliquer sur une chambre en gris pour faire votre choix"),e.k0s(),e.j41(25,"div",11)(26,"ion-button",12),e.bIt("click",function(){return t.previousFloor()}),e.nrm(27,"ion-icon",13),e.k0s(),e.j41(28,"span",14),e.EFF(29),e.k0s(),e.j41(30,"ion-button",12),e.bIt("click",function(){return t.nextFloor()}),e.nrm(31,"ion-icon",15),e.k0s()(),e.j41(32,"div",16)(33,"div",17)(34,"div",18),e.DNE(35,b,2,9,"div",19),e.k0s(),e.j41(36,"div",20)(37,"span",21),e.EFF(38,"Couloir"),e.k0s()(),e.j41(39,"div",22)(40,"div",23),e.EFF(41,"Entr\xe9e"),e.k0s(),e.DNE(42,h,2,9,"div",19),e.k0s()()()(),e.j41(43,"div",24)(44,"ion-button",25),e.bIt("click",function(){return t.proceedToPayment()}),e.EFF(45," Suivant "),e.k0s()()()),2&o&&(e.R7$(26),e.Y8G("disabled",0===t.currentFloorIndex),e.R7$(3),e.JRh(null==t.floors[t.currentFloorIndex]?null:t.floors[t.currentFloorIndex].name),e.R7$(),e.Y8G("disabled",t.currentFloorIndex===t.floors.length-1),e.R7$(5),e.Y8G("ngForOf",t.getLeftRooms()),e.R7$(7),e.Y8G("ngForOf",t.getRightRooms()),e.R7$(2),e.Y8G("disabled",!t.selectedRoom))},dependencies:[u.MD,u.Sq,s.W9,s.eU,s.ai,s.BC,s.QW,s.el,s.Jm,s.iq],styles:['@charset "UTF-8";[_nghost-%COMP%]{--primary-color: #1dd1a1;--text-primary: #374151;--text-secondary: #6b7280;--background: #ffffff;--border-color: #e5e7eb}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: white;--color: var(--text-primary)}ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--text-primary)}.room-selection-content[_ngcontent-%COMP%]{--background: #f8f9fa;--padding-bottom: 100px}.plan-section[_ngcontent-%COMP%]{background:#fff;margin:16px;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000001a}.plan-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px;font-weight:600;color:var(--text-primary)}.legend[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.legend-dot[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;flex-shrink:0}.legend-dot.taken[_ngcontent-%COMP%]{background:#ef4444}.legend-dot.reserved[_ngcontent-%COMP%]{background:#f59e0b}.legend-dot.selected[_ngcontent-%COMP%]{background:#10b981}.legend-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary)}.instruction[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin:16px 0;text-align:center}.floor-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px;margin:20px 0}.floor-indicator[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);min-width:60px;text-align:center}.room-plan[_ngcontent-%COMP%]{margin:24px 0}.room-grid[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-start}.room-side[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.corridor[_ngcontent-%COMP%]{width:60px;display:flex;align-items:center;justify-content:center;min-height:200px;background:#f3f4f6;border-radius:8px;position:relative}.corridor-label[_ngcontent-%COMP%]{writing-mode:vertical-rl;text-orientation:mixed;font-size:12px;color:var(--text-secondary);font-weight:500}.entrance-label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);text-align:center;margin-bottom:8px;font-weight:500}.room-cell[_ngcontent-%COMP%]{height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;border:2px solid transparent}.room-cell.libre[_ngcontent-%COMP%]{background:#f9fafb;color:var(--text-primary);border-color:var(--border-color)}.room-cell.libre[_ngcontent-%COMP%]:hover{background:#e5e7eb;transform:scale(1.05)}.room-cell.taken[_ngcontent-%COMP%]{background:#ef4444;color:#fff;cursor:not-allowed}.room-cell.reserved[_ngcontent-%COMP%]{background:#f59e0b;color:#fff;cursor:not-allowed}.room-cell.selected[_ngcontent-%COMP%]{background:#10b981;color:#fff;border-color:#059669;transform:scale(1.05)}.action-section[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:16px;border-top:1px solid var(--border-color);z-index:1000}.next-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-top: 16px;--padding-bottom: 16px;height:56px;font-weight:600}.next-button[_ngcontent-%COMP%]:disabled{--background: #d1d5db;--color: #9ca3af}@media (max-width: 768px){.plan-section[_ngcontent-%COMP%]{margin:12px;padding:16px}.room-grid[_ngcontent-%COMP%]{gap:12px}.corridor[_ngcontent-%COMP%]{width:40px;min-height:150px}.room-cell[_ngcontent-%COMP%]{height:36px;font-size:12px}.action-section[_ngcontent-%COMP%]{padding:12px}}']}),a})()}}]);